<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AoPS Course Schedule Calendar</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8fafc;
            color: #1e293b;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #0f172a;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .controls {
            text-align: center;
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .filter-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: #374151;
        }
        
        select, input {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            min-width: 150px;
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            text-align: center;
            min-width: 120px;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #3b82f6;
        }
        
        .stat-label {
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        .calendar-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .month-section {
            margin-bottom: 40px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .month-header {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 20px;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
        }
        
        .month-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background-color: #e5e7eb;
        }
        
        .day-header {
            background-color: #f3f4f6;
            padding: 12px;
            font-weight: 600;
            text-align: center;
            color: #374151;
            border-bottom: 2px solid #d1d5db;
        }
        
        .day-cell {
            background-color: white;
            min-height: 120px;
            padding: 8px;
            vertical-align: top;
            position: relative;
        }
        
        .day-number {
            font-weight: 600;
            color: #374151;
            margin-bottom: 5px;
        }
        
        .course-item {
            background: #3b82f6;
            color: white;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 10px;
            margin-bottom: 2px;
            cursor: pointer;
            transition: all 0.2s;
            line-height: 1.2;
            word-wrap: break-word;
        }
        
        .course-item:hover {
            transform: scale(1.02);
            z-index: 10;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        
        /* Course type colors */
        .course-prealgebra { background: #3b82f6; }
        .course-algebra { background: #10b981; }
        .course-intro { background: #f59e0b; }
        .course-physics { background: #ef4444; }
        .course-intermediate { background: #8b5cf6; }
        .course-precalc { background: #06b6d4; }
        .course-calculus { background: #84cc16; }
        .course-fma { background: #f97316; }
        .course-mathcounts { background: #ec4899; }
        .course-maa { background: #14b8a6; }
        .course-python { background: #6366f1; }
        .course-cs { background: #f43f5e; }
        
        .today {
            background-color: #fef3c7 !important;
            border: 2px solid #f59e0b;
        }
        
        .other-month {
            color: #9ca3af;
            background-color: #f9fafb;
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }
        
        @media (max-width: 768px) {
            .month-grid {
                font-size: 12px;
            }
            .day-cell {
                min-height: 80px;
                padding: 4px;
            }
            .course-item {
                font-size: 9px;
                padding: 2px 4px;
            }
            .controls {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>AoPS Course Schedule Calendar</h1>
        <p>Academic Year 2025 - Updated from Database on September 05, 2025 at 08:20 AM</p>
    </div>
    
    <div class="controls">
        <div class="filter-group">
            <label for="monthSelect">Month:</label>
            <select id="monthSelect">
                <option value="all">All Months</option>
                <option value="8">August 2025</option>
                <option value="9">September 2025</option>
                <option value="10">October 2025</option>
                <option value="11">November 2025</option>
                <option value="12">December 2025</option>
            </select>
        </div>
        <div class="filter-group">
            <label for="courseFilter">Course Type:</label>
            <select id="courseFilter">
                <option value="all">All Courses</option>
                <option value="prealgebra">Pre-Algebra</option>
                <option value="algebra">Algebra</option>
                <option value="intro">Intro Courses</option>
                <option value="physics">Physics</option>
                <option value="intermediate">Intermediate</option>
                <option value="precalc">Pre-Calculus</option>
                <option value="calculus">Calculus</option>
                <option value="fma">FMA</option>
                <option value="mathcounts">MATHCOUNTS</option>
                <option value="maa">MAA/AMC</option>
                <option value="python">Python</option>
                <option value="cs">Computer Science</option>
            </select>
        </div>
    </div>
    
    <div class="stats">
        <div class="stat-card">
            <div class="stat-number" id="totalCourses">0</div>
            <div class="stat-label">Total Courses</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="uniqueTypes">0</div>
            <div class="stat-label">Course Types</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="avgPerMonth">0</div>
            <div class="stat-label">Avg Per Month</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="peakMonth">-</div>
            <div class="stat-label">Peak Month</div>
        </div>
    </div>
    
    <div class="legend" id="legend"></div>
    
    <div class="calendar-container" id="calendarContainer"></div>

    <script>
        // Course data - pulled from database on 2025-09-05 08:20:44
        const courseData = [
            {
                        "course": "precalc",
                        "date": "8/6/2025",
                        "class_id": "4497"
            },
            {
                        "course": "maa-amc12",
                        "date": "8/6/2025",
                        "class_id": "4360"
            },
            {
                        "course": "algebra-b",
                        "date": "8/7/2025",
                        "class_id": "4474"
            },
            {
                        "course": "intermediate-algebra",
                        "date": "8/8/2025",
                        "class_id": "4490"
            },
            {
                        "course": "maa-amc10",
                        "date": "8/10/2025",
                        "class_id": "4523"
            },
            {
                        "course": "maa-amc12",
                        "date": "8/10/2025",
                        "class_id": "4536"
            },
            {
                        "course": "maa-amc10",
                        "date": "8/10/2025",
                        "class_id": "4577"
            },
            {
                        "course": "maa-amc10",
                        "date": "8/10/2025",
                        "class_id": "4578"
            },
            {
                        "course": "intro-counting",
                        "date": "8/11/2025",
                        "class_id": "4458"
            },
            {
                        "course": "maa-amc12",
                        "date": "8/11/2025",
                        "class_id": "4537"
            },
            {
                        "course": "intro-geometry",
                        "date": "8/13/2025",
                        "class_id": "4482"
            },
            {
                        "course": "intro-numbertheory",
                        "date": "8/13/2025",
                        "class_id": "4465"
            },
            {
                        "course": "maa-amc10",
                        "date": "8/14/2025",
                        "class_id": "4524"
            },
            {
                        "course": "python1",
                        "date": "8/14/2025",
                        "class_id": "4545"
            },
            {
                        "course": "maa-amc10-final-five",
                        "date": "8/15/2025",
                        "class_id": "4529"
            },
            {
                        "course": "prealgebra1",
                        "date": "8/17/2025",
                        "class_id": "4431"
            },
            {
                        "course": "prealgebra2",
                        "date": "8/17/2025",
                        "class_id": "4441"
            },
            {
                        "course": "mathcounts-basics",
                        "date": "8/17/2025",
                        "class_id": "4506"
            },
            {
                        "course": "algebra-a",
                        "date": "8/17/2025",
                        "class_id": "4449"
            },
            {
                        "course": "mathcounts-advanced",
                        "date": "8/17/2025",
                        "class_id": "4514"
            },
            {
                        "course": "algebra-b",
                        "date": "8/18/2025",
                        "class_id": "4475"
            },
            {
                        "course": "maa-amc10",
                        "date": "8/19/2025",
                        "class_id": "4525"
            },
            {
                        "course": "intermediate-algebra",
                        "date": "8/26/2025",
                        "class_id": "4491"
            },
            {
                        "course": "prealgebra1",
                        "date": "8/26/2025",
                        "class_id": "4432"
            },
            {
                        "course": "intro-geometry",
                        "date": "8/26/2025",
                        "class_id": "4483"
            },
            {
                        "course": "mathcounts-advanced",
                        "date": "8/26/2025",
                        "class_id": "4515"
            },
            {
                        "course": "algebra-a",
                        "date": "8/27/2025",
                        "class_id": "4450"
            },
            {
                        "course": "maa-aimeb",
                        "date": "9/2/2025",
                        "class_id": "4543"
            },
            {
                        "course": "woot-math-1",
                        "date": "9/2/2025",
                        "class_id": "4380"
            },
            {
                        "course": "intro-physics",
                        "date": "9/2/2025",
                        "class_id": "4469"
            },
            {
                        "course": "intro-counting",
                        "date": "9/3/2025",
                        "class_id": "4459"
            },
            {
                        "course": "cs-bronze",
                        "date": "9/3/2025",
                        "class_id": "4549"
            },
            {
                        "course": "mathcounts-basics",
                        "date": "9/3/2025",
                        "class_id": "4508"
            },
            {
                        "course": "mathcounts-advanced",
                        "date": "9/4/2025",
                        "class_id": "4516"
            },
            {
                        "course": "maa-amc12-final-five",
                        "date": "9/4/2025",
                        "class_id": "4540"
            },
            {
                        "course": "algebra-a",
                        "date": "9/5/2025",
                        "class_id": "4451"
            },
            {
                        "course": "prealgebra1",
                        "date": "9/5/2025",
                        "class_id": "4433"
            },
            {
                        "course": "woot-math-2",
                        "date": "9/5/2025",
                        "class_id": "4381"
            },
            {
                        "course": "intro-geometry",
                        "date": "9/7/2025",
                        "class_id": "4484"
            },
            {
                        "course": "algebra-b",
                        "date": "9/7/2025",
                        "class_id": "4476"
            },
            {
                        "course": "calculus",
                        "date": "9/7/2025",
                        "class_id": "4443"
            },
            {
                        "course": "maa-amc10-final-five",
                        "date": "9/7/2025",
                        "class_id": "4530"
            },
            {
                        "course": "python1",
                        "date": "9/7/2025",
                        "class_id": "4546"
            },
            {
                        "course": "woot-code",
                        "date": "9/8/2025",
                        "class_id": "4379"
            },
            {
                        "course": "prealgebra1",
                        "date": "9/8/2025",
                        "class_id": "4434"
            },
            {
                        "course": "precalc",
                        "date": "9/9/2025",
                        "class_id": "4498"
            },
            {
                        "course": "maa-amc10-final-five",
                        "date": "9/9/2025",
                        "class_id": "4531"
            },
            {
                        "course": "prealgebra2",
                        "date": "9/9/2025",
                        "class_id": "4442"
            },
            {
                        "course": "algebra-a",
                        "date": "9/11/2025",
                        "class_id": "4452"
            },
            {
                        "course": "intro-geometry",
                        "date": "9/11/2025",
                        "class_id": "4485"
            },
            {
                        "course": "intro-numbertheory",
                        "date": "9/12/2025",
                        "class_id": "4466"
            },
            {
                        "course": "mathcounts-advanced",
                        "date": "9/12/2025",
                        "class_id": "4517"
            },
            {
                        "course": "paradoxes-seminar",
                        "date": "9/13/2025",
                        "class_id": "4558"
            },
            {
                        "course": "maa-amc12",
                        "date": "9/15/2025",
                        "class_id": "4538"
            },
            {
                        "course": "mathcounts-advanced",
                        "date": "9/15/2025",
                        "class_id": "4518"
            },
            {
                        "course": "maa-amc10",
                        "date": "9/15/2025",
                        "class_id": "4526"
            },
            {
                        "course": "mathcounts-basics",
                        "date": "9/16/2025",
                        "class_id": "4510"
            },
            {
                        "course": "fma",
                        "date": "9/16/2025",
                        "class_id": "4501"
            },
            {
                        "course": "prealgebra1",
                        "date": "9/16/2025",
                        "class_id": "4436"
            },
            {
                        "course": "algebra-b",
                        "date": "9/18/2025",
                        "class_id": "4477"
            },
            {
                        "course": "prealgebra1",
                        "date": "9/21/2025",
                        "class_id": "4435"
            },
            {
                        "course": "precalc",
                        "date": "9/21/2025",
                        "class_id": "4499"
            },
            {
                        "course": "physics1",
                        "date": "9/21/2025",
                        "class_id": "4472"
            },
            {
                        "course": "mathcounts-basics",
                        "date": "9/21/2025",
                        "class_id": "4509"
            },
            {
                        "course": "intro-counting",
                        "date": "9/21/2025",
                        "class_id": "4460"
            },
            {
                        "course": "maa-amc10-final-five",
                        "date": "9/22/2025",
                        "class_id": "4532"
            },
            {
                        "course": "intermediate-numbertheory",
                        "date": "9/24/2025",
                        "class_id": "4507"
            },
            {
                        "course": "woot-chem",
                        "date": "9/24/2025",
                        "class_id": "4376"
            },
            {
                        "course": "algebra-b",
                        "date": "9/24/2025",
                        "class_id": "4478"
            },
            {
                        "course": "intro-geometry",
                        "date": "9/24/2025",
                        "class_id": "4486"
            },
            {
                        "course": "calculus",
                        "date": "9/24/2025",
                        "class_id": "4445"
            },
            {
                        "course": "prealgebra2",
                        "date": "9/25/2025",
                        "class_id": "4444"
            },
            {
                        "course": "woot-physics",
                        "date": "9/25/2025",
                        "class_id": "4378"
            },
            {
                        "course": "maa-amc12-final-five",
                        "date": "9/28/2025",
                        "class_id": "4541"
            },
            {
                        "course": "maa-amc10-final-five",
                        "date": "9/28/2025",
                        "class_id": "4533"
            },
            {
                        "course": "algebra-a",
                        "date": "9/28/2025",
                        "class_id": "4453"
            },
            {
                        "course": "intermediate-counting",
                        "date": "9/28/2025",
                        "class_id": "4504"
            },
            {
                        "course": "intermediate-algebra",
                        "date": "9/28/2025",
                        "class_id": "4492"
            },
            {
                        "course": "python2",
                        "date": "10/3/2025",
                        "class_id": "4548"
            },
            {
                        "course": "intro-counting",
                        "date": "10/3/2025",
                        "class_id": "4461"
            },
            {
                        "course": "mathcounts-advanced",
                        "date": "10/5/2025",
                        "class_id": "4519"
            },
            {
                        "course": "intro-physics",
                        "date": "10/5/2025",
                        "class_id": "4470"
            },
            {
                        "course": "maa-amc10",
                        "date": "10/6/2025",
                        "class_id": "4527"
            },
            {
                        "course": "algebra-a",
                        "date": "10/6/2025",
                        "class_id": "4454"
            },
            {
                        "course": "mathcounts-basics",
                        "date": "10/6/2025",
                        "class_id": "4511"
            },
            {
                        "course": "maa-amc12-final-five",
                        "date": "10/7/2025",
                        "class_id": "4542"
            },
            {
                        "course": "maa-amc12",
                        "date": "10/7/2025",
                        "class_id": "4539"
            },
            {
                        "course": "maa-amc10",
                        "date": "10/7/2025",
                        "class_id": "4528"
            },
            {
                        "course": "intermediate-algebra",
                        "date": "10/8/2025",
                        "class_id": "4493"
            },
            {
                        "course": "maa-amc10-final-five",
                        "date": "10/8/2025",
                        "class_id": "4534"
            },
            {
                        "course": "maa-amc10-final-five",
                        "date": "10/9/2025",
                        "class_id": "4535"
            },
            {
                        "course": "prealgebra1",
                        "date": "10/9/2025",
                        "class_id": "4437"
            },
            {
                        "course": "mathcounts-basics",
                        "date": "10/9/2025",
                        "class_id": "4512"
            },
            {
                        "course": "mathcounts-advanced",
                        "date": "10/15/2025",
                        "class_id": "4520"
            },
            {
                        "course": "fma",
                        "date": "10/17/2025",
                        "class_id": "4503"
            },
            {
                        "course": "prealgebra2",
                        "date": "10/19/2025",
                        "class_id": "4446"
            },
            {
                        "course": "intro-counting",
                        "date": "10/19/2025",
                        "class_id": "4462"
            },
            {
                        "course": "precalc",
                        "date": "10/20/2025",
                        "class_id": "4500"
            },
            {
                        "course": "algebra-a",
                        "date": "10/21/2025",
                        "class_id": "4455"
            },
            {
                        "course": "prealgebra1",
                        "date": "10/22/2025",
                        "class_id": "4438"
            },
            {
                        "course": "maa-aimea",
                        "date": "10/23/2025",
                        "class_id": "4544"
            },
            {
                        "course": "maa-amc10-special",
                        "date": "10/25/2025",
                        "class_id": "4560"
            },
            {
                        "course": "maa-amc12-special",
                        "date": "10/25/2025",
                        "class_id": "4561"
            },
            {
                        "course": "physics1",
                        "date": "10/26/2025",
                        "class_id": "4473"
            },
            {
                        "course": "algebra-b",
                        "date": "10/26/2025",
                        "class_id": "4479"
            },
            {
                        "course": "intro-numbertheory",
                        "date": "10/26/2025",
                        "class_id": "4467"
            },
            {
                        "course": "intro-geometry",
                        "date": "10/26/2025",
                        "class_id": "4487"
            },
            {
                        "course": "prealgebra2",
                        "date": "10/27/2025",
                        "class_id": "4447"
            },
            {
                        "course": "cs-bronze",
                        "date": "10/30/2025",
                        "class_id": "4550"
            },
            {
                        "course": "maa-amc12-special-b",
                        "date": "11/1/2025",
                        "class_id": "4563"
            },
            {
                        "course": "maa-amc10-special-b",
                        "date": "11/1/2025",
                        "class_id": "4562"
            },
            {
                        "course": "intro-geometry",
                        "date": "11/3/2025",
                        "class_id": "4488"
            },
            {
                        "course": "intro-counting",
                        "date": "11/4/2025",
                        "class_id": "4463"
            },
            {
                        "course": "intermediate-counting",
                        "date": "11/4/2025",
                        "class_id": "4505"
            },
            {
                        "course": "algebra-b",
                        "date": "11/4/2025",
                        "class_id": "4480"
            },
            {
                        "course": "prealgebra1",
                        "date": "11/4/2025",
                        "class_id": "4439"
            },
            {
                        "course": "algebra-a",
                        "date": "11/9/2025",
                        "class_id": "4456"
            },
            {
                        "course": "prealgebra2",
                        "date": "11/12/2025",
                        "class_id": "4448"
            },
            {
                        "course": "calculus",
                        "date": "11/14/2025",
                        "class_id": "4496"
            },
            {
                        "course": "intermediate-algebra",
                        "date": "11/16/2025",
                        "class_id": "4494"
            },
            {
                        "course": "algebra-b",
                        "date": "12/1/2025",
                        "class_id": "4481"
            },
            {
                        "course": "intro-numbertheory",
                        "date": "12/1/2025",
                        "class_id": "4468"
            },
            {
                        "course": "mathcounts-advanced",
                        "date": "12/2/2025",
                        "class_id": "4521"
            },
            {
                        "course": "cs-bronze",
                        "date": "12/2/2025",
                        "class_id": "4551"
            },
            {
                        "course": "python1",
                        "date": "12/2/2025",
                        "class_id": "4547"
            },
            {
                        "course": "algebra-a",
                        "date": "12/5/2025",
                        "class_id": "4457"
            },
            {
                        "course": "intro-geometry",
                        "date": "12/5/2025",
                        "class_id": "4489"
            },
            {
                        "course": "intro-counting",
                        "date": "12/7/2025",
                        "class_id": "4464"
            },
            {
                        "course": "mathcounts-advanced",
                        "date": "12/8/2025",
                        "class_id": "4522"
            },
            {
                        "course": "mathcounts-basics",
                        "date": "12/9/2025",
                        "class_id": "4513"
            },
            {
                        "course": "intro-physics",
                        "date": "12/10/2025",
                        "class_id": "4471"
            },
            {
                        "course": "intermediate-algebra",
                        "date": "12/11/2025",
                        "class_id": "4495"
            },
            {
                        "course": "prealgebra1",
                        "date": "12/12/2025",
                        "class_id": "4440"
            },
            {
                        "course": "relativity-seminar",
                        "date": "12/13/2025",
                        "class_id": "4557"
            },
            {
                        "course": "precalc",
                        "date": "12/14/2025",
                        "class_id": "4502"
            }
];

        // Process data
        const processedData = courseData.map(item => {
            const [month, day, year] = item.date.split('/');
            const date = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));
            const courseTypeMatch = item.course.match(/^([a-z]+)/);
            const courseType = courseTypeMatch ? courseTypeMatch[1] : 'other';
            
            return {
                ...item,
                fullDate: date,
                month: parseInt(month),
                day: parseInt(day),
                year: parseInt(year),
                courseType: courseType,
                displayName: item.course.replace(/-/g, ' ').replace(/(\w+)/g, (w) => w.charAt(0).toUpperCase() + w.slice(1))
            };
        });

        // Get unique months
        const months = [...new Set(processedData.map(item => item.month))].sort((a, b) => a - b);
        const monthNames = ['', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
        
        // Course type colors and labels
        const courseInfo = {
            'prealgebra': { color: '#3b82f6', label: 'Pre-Algebra' },
            'algebra': { color: '#10b981', label: 'Algebra' },
            'intro': { color: '#f59e0b', label: 'Intro Courses' },
            'physics': { color: '#ef4444', label: 'Physics' },
            'intermediate': { color: '#8b5cf6', label: 'Intermediate' },
            'precalc': { color: '#06b6d4', label: 'Pre-Calculus' },
            'calculus': { color: '#84cc16', label: 'Calculus' },
            'fma': { color: '#f97316', label: 'FMA' },
            'mathcounts': { color: '#ec4899', label: 'MATHCOUNTS' },
            'maa': { color: '#14b8a6', label: 'MAA/AMC' },
            'python': { color: '#6366f1', label: 'Python' },
            'cs': { color: '#f43f5e', label: 'Computer Science' }
        };

        function updateStats() {
            const filtered = getFilteredData();
            document.getElementById('totalCourses').textContent = filtered.length;
            
            const uniqueTypes = [...new Set(filtered.map(item => item.courseType))];
            document.getElementById('uniqueTypes').textContent = uniqueTypes.length;
            
            // Calculate average per month
            const monthsWithCourses = [...new Set(filtered.map(item => item.month))].length;
            const avgPerMonth = monthsWithCourses > 0 ? Math.round(filtered.length / monthsWithCourses) : 0;
            document.getElementById('avgPerMonth').textContent = avgPerMonth;
            
            // Find peak month
            const monthCounts = {};
            filtered.forEach(item => {
                monthCounts[item.month] = (monthCounts[item.month] || 0) + 1;
            });
            
            const peakMonth = Object.keys(monthCounts).reduce((a, b) => 
                monthCounts[a] > monthCounts[b] ? a : b, Object.keys(monthCounts)[0]
            );
            
            document.getElementById('peakMonth').textContent = 
                peakMonth ? monthNames[parseInt(peakMonth)] : '-';
        }

        function createLegend() {
            const legend = document.getElementById('legend');
            legend.innerHTML = '';
            
            const uniqueTypes = [...new Set(processedData.map(item => item.courseType))];
            
            uniqueTypes.forEach(type => {
                const item = document.createElement('div');
                item.className = 'legend-item';
                
                const color = document.createElement('div');
                color.className = 'legend-color';
                color.style.backgroundColor = courseInfo[type]?.color || '#6b7280';
                
                const label = document.createElement('span');
                label.textContent = courseInfo[type]?.label || type.toUpperCase();
                
                item.appendChild(color);
                item.appendChild(label);
                legend.appendChild(item);
            });
        }

        function getFilteredData() {
            const monthFilter = document.getElementById('monthSelect').value;
            const courseFilter = document.getElementById('courseFilter').value;
            
            let filtered = processedData;
            
            if (monthFilter !== 'all') {
                filtered = filtered.filter(item => item.month === parseInt(monthFilter));
            }
            
            if (courseFilter !== 'all') {
                filtered = filtered.filter(item => item.courseType === courseFilter);
            }
            
            return filtered;
        }

        function getDaysInMonth(month, year) {
            return new Date(year, month, 0).getDate();
        }

        function getFirstDayOfMonth(month, year) {
            return new Date(year, month - 1, 1).getDay();
        }

        function createCalendar() {
            const container = document.getElementById('calendarContainer');
            container.innerHTML = '';
            
            const monthFilter = document.getElementById('monthSelect').value;
            const monthsToShow = monthFilter === 'all' ? months : [parseInt(monthFilter)];
            
            monthsToShow.forEach(month => {
                const monthSection = document.createElement('div');
                monthSection.className = 'month-section';
                
                const monthHeader = document.createElement('div');
                monthHeader.className = 'month-header';
                monthHeader.textContent = `${monthNames[month]} 2025`;
                
                const monthGrid = document.createElement('div');
                monthGrid.className = 'month-grid';
                
                // Add day headers
                const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                dayHeaders.forEach(day => {
                    const dayHeader = document.createElement('div');
                    dayHeader.className = 'day-header';
                    dayHeader.textContent = day;
                    monthGrid.appendChild(dayHeader);
                });
                
                // Get calendar layout
                const daysInMonth = getDaysInMonth(month, 2025);
                const firstDay = getFirstDayOfMonth(month, 2025);
                
                // Add empty cells for days before the first day of month
                for (let i = 0; i < firstDay; i++) {
                    const emptyCell = document.createElement('div');
                    emptyCell.className = 'day-cell other-month';
                    monthGrid.appendChild(emptyCell);
                }
                
                // Add days of the month
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayCell = document.createElement('div');
                    dayCell.className = 'day-cell';
                    
                    // Check if today
                    const today = new Date();
                    if (today.getFullYear() === 2025 && 
                        today.getMonth() === month - 1 && 
                        today.getDate() === day) {
                        dayCell.classList.add('today');
                    }
                    
                    const dayNumber = document.createElement('div');
                    dayNumber.className = 'day-number';
                    dayNumber.textContent = day;
                    dayCell.appendChild(dayNumber);
                    
                    // Add courses for this day
                    const filtered = getFilteredData();
                    const coursesForDay = filtered.filter(item => 
                        item.month === month && item.day === day
                    );
                    
                    coursesForDay.forEach(course => {
                        const courseItem = document.createElement('div');
                        courseItem.className = `course-item course-${course.courseType}`;
                        courseItem.textContent = course.displayName;
                        courseItem.style.backgroundColor = courseInfo[course.courseType]?.color || '#6b7280';
                        
                        // Add click event for popup
                        courseItem.onclick = () => showCoursePopup(course);
                        
                        // Keep a simple tooltip for hover
                        courseItem.title = `Click for details: ${course.displayName}`;
                        
                        dayCell.appendChild(courseItem);
                    });
                    
                    monthGrid.appendChild(dayCell);
                }
                
                // Fill remaining cells to complete the grid
                const totalCells = Math.ceil((firstDay + daysInMonth) / 7) * 7;
                const cellsUsed = firstDay + daysInMonth;
                for (let i = cellsUsed; i < totalCells; i++) {
                    const emptyCell = document.createElement('div');
                    emptyCell.className = 'day-cell other-month';
                    monthGrid.appendChild(emptyCell);
                }
                
                monthSection.appendChild(monthHeader);
                monthSection.appendChild(monthGrid);
                container.appendChild(monthSection);
            });
        }

        // Event listeners
        document.getElementById('monthSelect').addEventListener('change', () => {
            createCalendar();
            updateStats();
        });
        
        document.getElementById('yearSelect').addEventListener('change', () => {
            createCalendar();
            updateStats();
        });
        
        document.getElementById('courseFilter').addEventListener('change', () => {
            createCalendar();
            updateStats();
        });

        // Initialize
        populateYearDropdown();
        createLegend();
        createCalendar();
        updateStats();
    </script>
</body>
</html>